<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">



        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Event Processing - Yosai</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->


    </head>

    <body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Collapsed navigation -->
            <div class="navbar-header">
                <!-- Expander button -->
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- Main title -->
                <a class="active navbar-brand" href="..">Yosai</a>
            </div>
            <!-- Expanded navigation -->
            <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../intro/">Introduction</a>
                            </li>
                            <li>
                                <a href="../installation_setup/">Installation and Setup</a>
                            </li>
                            <li >
                                <a href="../quickstart/">Quick-Start</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../authentication/">Authentication</a>
                            </li>
                            <li>
                                <a href="../authorization/">Authorization</a>
                            </li>
                            <li>
                                <a href="../sessionmanagement/">Session Management</a>
                            </li>
                            <li class="active">
                                <a href="./">Event Processing</a>
                            </li>
                            <li>
                                <a href="../serialization/">Serialization</a>
                            </li>
                            <li>
                                <a href="../architecture/">Architecture Overview</a>
                            </li>
                            <li>
                                <a href="../web">Web Integration</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../devstatus/">Development Status</a>
                            </li>
                            <li>
                                <a href="../library/">Library</a>
                            </li>
                            <li>
                                <a href="../community/">Community</a>
                            </li>
                            <li>
                                <a href="../credits/">Credits</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../tutorials/totp_tutorial">TOTP Authentication</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>

                    <li >
                        <a rel="next" href="../sessionmanagement/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../serialization/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>

                    <li>
                        <a href="https://github.com/yosaiproject">

                            <i class="fa fa-github"></i> GitHub
                        </a>
                    </li>

                </ul>
            </div>
        </div>
    </div>

  <div class="container">

                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">

        <li class="main active"><a href="#event-driven-architecture">Event-Driven Architecture</a></li>

            <li><a href="#sending-events">Sending Events</a></li>

            <li><a href="#receiving-events">Receiving Events</a></li>

            <li><a href="#event-schedule">Event Schedule</a></li>

            <li><a href="#event-logging">Event Logging</a></li>


    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="event-driven-architecture">Event-Driven Architecture</h1>
<p><img alt="eventdriven" src="../img/eventdriven.png" /></p>
<p>Yosai features an event-driven architecture where events emitted during
authentication, authorization, and session management trigger subsequent
processing.</p>
<p>Events are communicated using a publish-subscribe paradigm.  An event publisher
emits the event to a channel (an internal Event Bus) that relays the event to
consumers who have subscribed to the event's topic.  An EventBus singleton is
shared throughout the running instance of Yosai, passed down from the SecurityManager.</p>
<p><img alt="pubsub" src="../img/pubsub.png" /></p>
<p>An EventBus relays published events to event subscribers and provides a mechanism for
registering and unregistering event subscribers. With this pubsub paradigm,
components can publish or consume events without tightly coupling consumers to
producers.  This promotes flexibility through loose coupling and high cohesion
between components, leading to a more pluggable architecture.</p>
<h2 id="sending-events">Sending Events</h2>
<p>If a component wishes to publish events to other components:
<code>event_bus.publish(topic, *kwargs)</code></p>
<p>The event bus dispatches the event 'message' to components that wish to receive
events of that type (known as subscribers).</p>
<h2 id="receiving-events">Receiving Events</h2>
<p>A component can receive events of interest by doing the following.</p>
<p>For each event topic you wish to consume, create a callback method
that will be called when an specific type of event is communicated across
the event bus.  Register the callback with the event_bus:
<code>event_bus.register(topic, callback)</code></p>
<h2 id="event-schedule">Event Schedule</h2>
<p>The following table lists the Events that are used in Yosai, who the
publisher of an event is, and who the subscriber(s) are:</p>
<table>
<thead>
<tr>
<th>Event Topic</th>
<th>Publisher</th>
<th>Subscriber(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>SESSION.START</td>
<td>SEH</td>
<td>EL</td>
</tr>
<tr>
<td>SESSION.STOP</td>
<td>SEH</td>
<td>MRA, EL</td>
</tr>
<tr>
<td>SESSION.EXPIRE</td>
<td>SEH</td>
<td>MRA, EL</td>
</tr>
<tr>
<td>AUTHENTICATION.SUCCEEDED</td>
<td>DA</td>
<td>MRA, EL</td>
</tr>
<tr>
<td>AUTHENTICATION.FAILED</td>
<td>DA</td>
<td>EL</td>
</tr>
<tr>
<td>AUTHORIZATION.GRANTED</td>
<td>MRA</td>
<td>EL</td>
</tr>
<tr>
<td>AUTHORIZATION.DENIED</td>
<td>MRA</td>
<td>EL</td>
</tr>
<tr>
<td>AUTHORIZATION.RESULTS</td>
<td>MRA</td>
<td>EL</td>
</tr>
</tbody>
</table>
<ul>
<li>DA = <code>yosai.core.authc.authc.DefaultAuthenticator</code></li>
<li>EL = <code>yosai.core.event.event.EventLogger</code></li>
<li>MRA = <code>yosai.core.authz.authz.ModularRealmAuthorizer</code></li>
<li>SEH = <code>yosai.core.session.session.SessionEventHandler</code></li>
</ul>
<h2 id="event-logging">Event Logging</h2>
<p><img alt="logging" src="../img/logs.png" /></p>
<p>Communicating events in a structured format facilitates processing of log
entries by systems independent of Yosai.  Therefore, events are
logged in a structured format by reducing event payloads to their serializable
form.</p>
<p>Yosai includes an optional logging module that features JSON encoded formatting.<br />
It is highly recommended that you use this feature or one like it to benefit by
structured logging.</p></div>

        </div>

        <footer class="col-md-12">
            <hr>

            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>
        <script src="../js/extra.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
