<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../img/favicon.ico">
    <title>Web Integration - Yosai</title>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <link href="../css/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Collapsed navigation -->
            <div class="navbar-header">
                <!-- Expander button -->
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="sr-only">Toggle
navigation</span></button>
                <!-- Main title -->
                <a class="navbar-brand" href="..">Yosai</a></div>
            <!-- Expanded navigation -->
            <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started</a>
                        <ul class="dropdown-menu">
                            <li><a href="../intro/">Introduction</a></li>
                            <li><a href="../installation_setup/">Installation and
Setup</a></li>
                            <li><a href="../quickstart/">Quick-Start</a></li>
                        </ul>
                    </li>
                    <li class="dropdown active"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation</a>
                        <ul class="dropdown-menu">
                            <li><a href="../authentication/">Authentication</a></li>
                            <li><a href="../authorization/">Authorization</a></li>
                            <li><a href="../sessionmanagement/">Session Management</a></li>
                            <li><a href="../events/">Event Processing</a></li>
                            <li><a href="../serialization/">Serialization</a></li>
                            <li><a href="../architecture/">Architecture Overview</a></li>
                            <li class="active"><a href="./">Web Integration</a></li>
                        </ul>
                    </li>
                    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">More</a>
                        <ul class="dropdown-menu">
                            <li><a href="../devstatus/">Development Status</a></li>
                            <li><a href="../library/">Library</a></li>
                            <li><a href="../community/">Community</a></li>
                            <li><a href="../contributing/">Contributing</a></li>
                            <li><a href="../code_of_conduct/">Code of Conduct</a></li>
                            <li><a href="../credits/">Credits</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="../tutorials/totp_tutorial">TOTP Authentication</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">Search</a></li>
                    <li><a rel="next" href="../architecture/">Previous</a></li>
                    <li><a rel="prev" href="../devstatus/">Next</a></li>
                    <li><a href="https://github.com/yosaiproject">GitHub</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="col-md-3">
            <div class="bs-sidebar hidden-print affix well" role="complementary">
                <ul class="nav bs-sidenav">
                    <li class="main active"><a href="#web-integration">Web
Integration</a></li>
                    <li><a href="#architectural-overview">Architectural
Overview</a></li>
                    <li><a href="#web-registry-api">Web Registry API</a></li>
                    <li><a href="#initializing-web-enabled-yosai">Initializing
Web-enabled Yosai</a></li>
                    <li><a href="#using-a-web-enabled-yosai">Using a Web-enabled
Yosai</a></li>
                    <li><a href="#middleware-support-tbd">Middleware Support:
TBD</a></li>
                </ul>
            </div>
        </div>
        <div class="col-md-9" role="main">
            <h1 id="web-integration">Web Integration</h1>
            <p>This section of documentation is dedicated to
                <code>yosai.web</code>.</p>
            <p>When you install Yosai from PyPI (using the pip installer), you are installing a package that includes <code>yosai.core</code>, featuring the framework and a "native" library, and
                <code>yosai.web</code>, which extends <code>yosai.core</code> to support web applications.</p>
            <p>Web development is so popular that it makes sense to include support for it from the main Yosai project package. Further, this approach is consistent with that taken by the Apache Shiro project.
            </p>
            <h2 id="architectural-overview">Architectural Overview</h2>
            <p>Yosai enables web support by extending, through inheritance, a few of the key components (and sub-components), in its architecture:
            </p>
            <p><img alt="web_architecture" src="../img/yosai_web_architecture.png"></p>
            <p>These components are extended to support interaction with a web-specific API, known as a <code>WebRegistry</code> API, that manages a web application's cookies used to track SessionID and RememberMe and manages other related attributes.</p>
            <h2 id="web-registry-api">Web Registry API</h2>
            <p><code>yosai.web</code> is designed to integrate with any kind of web application. It can integrate with any application framework, such as Django, Pyramid, Flask, or Bottle. This is made possible through application-specific implementations
                of the WebRegistry API.
            </p>
            <p>The WebRegistry API is an interface, specified by an abstract base class (like the rest of the interfaces defined in Yosai). For instance, a <code>pyramid_yosai</code> integration consists of a PyramidWebRegistry implementation, a <code>django_yosai</code>                integration consist of a DjangoWebRegistry, etc.</p>
            <h2 id="initializing-web-enabled-yosai">Initializing Web-enabled
Yosai</h2>
            <p>Instantiating a web-enabled instance of Yosai follows the same process as instantiating a native Yosai instance except that a WebYosai class is used rather than a Yosai class. However, web-enabled classes are used instead of the yosai.core
                native classes. These web-enabled classes are automatically used by a WebSecurityManager. So, all you need to do in order to make use of the web-enabled classes is specify in Yosai's yaml settings file that the WebSecurityManager is used:</p>
            <div class="codehilite" style="background: #272822">
                <pre style="line-height: 125%">SECURITY_MANAGER_CONFIG:
    security_manager: yosai.web.WebSecurityManager
</pre></div>
            <div class="codehilite" style="background: #272822">
                <pre style="line-height: 125%"><span style=
"color: #f92672">from</span> <span style=
"color: #f8f8f2">yosai.web</span> <span style=
"color: #f92672">import</span> <span style=
"color: #f8f8f2">WebYosai</span>

<span style="color: #f8f8f2">yosai</span> <span style=
"color: #f92672">=</span> <span style=
"color: #f8f8f2">WebYosai(env_var</span><span style=
"color: #f92672">=</span><span style=
"color: #e6db74">'YOSAI_SETTINGS'</span><span style=
"color: #f8f8f2">)</span>
</pre></div>
            <h2 id="using-a-web-enabled-yosai">Using a Web-enabled Yosai</h2>
            <p>To secure web applications with Yosai, you open a WebYosai context in an early stage of a web request's lifecycle, prior to calling views. The context is passed two parameters-- a
                <code>WebYosai</code> instance and <code>WebRegistry</code> instance:
            </p>
            <div class="codehilite" style="background: #272822">
                <pre style="line-height: 125%"><span style=
"color: #f8f8f2">web_registry</span> <span style=
"color: #f92672">=</span> <span style=
"color: #f8f8f2">xxxWebRegistry(request)</span>

<span style="color: #66d9ef">with</span> <span style=
"color: #f8f8f2">WebYosai</span><span style=
"color: #f92672">.</span><span style=
"color: #f8f8f2">context(yosai,</span> <span style=
"color: #f8f8f2">web_registry):</span>
    <span style="color: #f8f8f2">response</span> <span style=
"color: #f92672">=</span> <span style=
"color: #f8f8f2">handle(request)</span>  <span style=
"color: #75715e"># just an example of request hooking..</span>
</pre></div>
            <p>A <code>WebRegistry</code> is specific to a web application implementation. Consequently, a <code>WebRegistry</code> must be created for each web framework / application used.<br> For instance, a <a href="https://github.com/YosaiProject/pyramid_yosai/blob/master/pyramid_yosai/webregistry.py#L16">
PyramidWebRegistry</a> is used when integrating Yosai with applications created with the Pyramid Web Framework. In the example above, 'xxx' is a placeholder for whatever specific web registry you use.</p>
            <h2 id="middleware-support-tbd">Middleware Support: TBD</h2>
            <p>Yosai does not yet include any WSGI middleware ports of Apache Shiro's servlet related functionality. Pull requests are welcome.
            </p>
        </div>
    </div>
    <footer class="col-md-12">
        <hr>
        <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
    </footer>
    <script src="../js/jquery-1.10.2.min.js">
    </script>
    <script src="../js/bootstrap-3.0.3.min.js">
    </script>
    <script src="../js/highlight.pack.js">
    </script>
    <script>
        var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js">
    </script>
    <script src="../js/base.js">
    </script>
    <script src="../js/extra.js">
    </script>
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class=
"sr-only">Close</span></button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>From here you can search these documents. Enter your search terms below.</p>
                    <form role="form">
                        <div class="form-group"><input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query"></div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer"></div>
            </div>
        </div>
    </div>
</body>

</html>
