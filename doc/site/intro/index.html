<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Introduction - Yosai</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">Yosai</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Introduction</a>
</li>

                        
                            
<li >
    <a href="../installation_setup/">Installation and Setup</a>
</li>

                        
                            
<li >
    <a href="../quickstart/">Quick-Start</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../authentication/">Authentication</a>
</li>

                        
                            
<li >
    <a href="../authorization/">Authorization</a>
</li>

                        
                            
<li >
    <a href="../sessionmanagement/">Session Management</a>
</li>

                        
                            
<li >
    <a href="../events/">Event Processing</a>
</li>

                        
                            
<li >
    <a href="../serialization/">Serialization</a>
</li>

                        
                            
<li >
    <a href="../architecture/">Architecture Overview</a>
</li>

                        
                            
<li >
    <a href="../web/">Web Integration</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../devstatus/">Development Status</a>
</li>

                        
                            
<li >
    <a href="../library/">Library</a>
</li>

                        
                            
<li >
    <a href="../community/">Community</a>
</li>

                        
                            
<li >
    <a href="../contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="../code_of_conduct/">Code of Conduct</a>
</li>

                        
                            
<li >
    <a href="../credits/">Credits</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../installation_setup/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/yosaiproject">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#introduction">Introduction</a></li>
        
    
        <li class="main "><a href="#what-is-yosai">What is Yosai?</a></li>
        
            <li><a href="#architectural-overview-yosaicore">Architectural Overview: yosai.core</a></li>
        
    
        <li class="main "><a href="#fundamentals">Fundamentals</a></li>
        
            <li><a href="#initializing-yosai">Initializing Yosai</a></li>
        
            <li><a href="#introducing-subject">Introducing: Subject</a></li>
        
            <li><a href="#authentication">Authentication</a></li>
        
            <li><a href="#authorization">Authorization</a></li>
        
            <li><a href="#session-management">Session Management</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="introduction">Introduction</h1>
<p>Within this section of documentation, you will learn the fundamental concepts presented in Yosai.  More detailed documentation, including tutorials, is available in subsequent sections.</p>
<h1 id="what-is-yosai">What is Yosai?</h1>
<p>Yosai helps you to control who can use your application and how it is used,
managing state between requests.  In other words, Yosai offers authentication,
 authorization, and session management, respectively.</p>
<h2 id="architectural-overview-yosaicore">Architectural Overview: yosai.core</h2>
<p>Yosai is a framework, allowing you to add or replace components that are designed according to documented interface specifications.  More specifically, the framework is defined using a collection of abstract base classes.</p>
<p><img alt="anon_architecture" src="../img/anon_architecture.png" /></p>
<p>Although it is customizable, Yosai features a set of default implementations to address its most anticipated uses. It is "built to contract", featuring concrete implementations of abstract base classes that collectively define Yosai's architecture. Developers who find Yosai's default concrete implementations unsuitable for their needs may implement their own components according to ABC specifications and swap components.</p>
<h1 id="fundamentals">Fundamentals</h1>
<h2 id="initializing-yosai">Initializing Yosai</h2>
<p>With Yosai initialized, you can authenticate, authorize, and manage sessions.</p>
<p>To initialize Yosai, you must specify, at a minimum:</p>
<ul>
<li>What CacheHandler to use, if you are caching.  In this example, we use the
  DPCacheHandler extension.</li>
<li>The AccountStore instance(s) from which to obtain authentication and
  authorization information.  In this example, we use the AlchemyAccountStore
  extension.</li>
<li>The <code>marshmallow</code> serialization Schema you will use to (de)serialize
  Session state (user-defined session attributes), if you are caching</li>
</ul>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%">    <span style="color: #f92672">from</span> <span style="color: #f8f8f2">marshmallow</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Schema,</span> <span style="color: #f8f8f2">fields</span>
    <span style="color: #f92672">from</span> <span style="color: #f8f8f2">yosai_dpcache.cache</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">DPCacheHandler</span>
    <span style="color: #f92672">from</span> <span style="color: #f8f8f2">yosai_alchemystore</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">AlchemyAccountStore</span>
    <span style="color: #f92672">from</span> <span style="color: #f8f8f2">yosai.core</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">SecurityUtils,</span> <span style="color: #f8f8f2">AccountStoreRealm</span>

    <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">SessionAttributesSchema</span><span style="color: #f8f8f2">(Schema):</span>
        <span style="color: #f8f8f2">attribute1</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">fields</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">String()</span>
        <span style="color: #f8f8f2">attribute2</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">fields</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">String()</span>

    <span style="color: #f8f8f2">realm</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">AccountStoreRealm(name</span><span style="color: #f92672">=</span><span style="color: #e6db74">&#39;UserAccountStore123&#39;</span><span style="color: #f8f8f2">,</span>
                              <span style="color: #f8f8f2">account_store</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">AlchemyAccountStore())</span>

    <span style="color: #f8f8f2">security_manager</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">NativeSecurityManager(cache_handler</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">DPCacheHandler(),</span>
                                             <span style="color: #f8f8f2">realms</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">(realm,),</span>
                                             <span style="color: #f8f8f2">session_schema</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">SessionAttributesSchema)</span>

    <span style="color: #f8f8f2">yosai</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">SecurityUtils(security_manager</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">security_manager)</span>
</pre></div>


<div class="admonition note">
<ul>
<li>To properly serialize your session attributes, you must define a
  <code>marshmallow</code> schema class, which in this example we've arbitrarily named SessionAttributesSchema</li>
</ul>
</div>
<h2 id="introducing-subject">Introducing: Subject</h2>
<p>The three core services provided by Yosai are:</p>
<ol>
<li>Authentication</li>
<li>Authorization</li>
<li>Session Management</li>
</ol>
<p>These services share a common API that you will use to interact with them:  the Subject API.</p>
<p>Every security related operation is performed in the context of a <strong>Subject</strong>.
The term "Subject" is generally synonymous with "User" except that aside from
human beings also includes non-human, system entities.  In other words, a <strong>Subject</strong> is a <em>person</em> or a <em>thing</em>.</p>
<h2 id="authentication">Authentication</h2>
<p>In this example, we "log in" a Subject, performing password-based authentication
that raises an AuthenticationException if authentication were to fail.</p>
<p>Note that the following example assumes that a <code>yosai</code> instance has already
been instantiated and configured with a SecurityManager.  See the <code>yosai init</code>
documentation, further below, for how to do that.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%">    <span style="color: #f92672">from</span> <span style="color: #f8f8f2">yosai.core</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">AuthenticationToken</span>

    <span style="color: #66d9ef">with</span> <span style="color: #f8f8f2">yosai:</span>
        <span style="color: #f8f8f2">subject</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">yosai</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">subject</span>

        <span style="color: #f8f8f2">authc_token</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">UsernamePasswordToken(username</span><span style="color: #f92672">=</span><span style="color: #e6db74">&#39;thedude&#39;</span><span style="color: #f8f8f2">,</span>
                                            <span style="color: #f8f8f2">credentials</span><span style="color: #f92672">=</span><span style="color: #e6db74">&#39;letsgobowling&#39;</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f8f8f2">subject</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">login(authc_token)</span>
</pre></div>


<div class="admonition note">
<p>UsernamePasswordToken is a consolidation of a user account's identifying
attributes (username) and credentials (password) submitted by a user
during an authentication attempt</p>
</div>
<h2 id="authorization">Authorization</h2>
<p>Authorization is conducted in your application either by decorating methods with an authorization check, such as in the example below, or by expicitly calling
one of Subject's access control methods.</p>
<p>The following example confirms whether the user logged in above has sufficient
privileges to approve a bowling tournament application.  We illustrate what is known as the <em>declarative style</em> authorization.  Information about authorization styles can be found in the authorization documentation.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%">    <span style="color: #f92672">from</span> <span style="color: #f8f8f2">yosai.core</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">check_permission</span>

    <span style="color: #a6e22e">@check_permission</span><span style="color: #f8f8f2">([</span><span style="color: #e6db74">&#39;tournament:approve&#39;</span><span style="color: #f8f8f2">])</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">approve_tournament_application</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">tournament_application):</span>
        <span style="color: #f8f8f2">tournament_application</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">status</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;APPROVED&#39;</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notify_approval(tournament_application)</span>
</pre></div>


<h2 id="session-management">Session Management</h2>
<p>Yosai offers session management for anonymous guests or authenticated users.
In the Authentication example above, the Subject is automatically allocated a
new session in Yosai following successful authentication.  We manage
the attributes of a session through a CRUD-like series of methods:</p>
<p>Note that the following example assumes that a <code>yosai</code> instance has already
been instantiated and configured with a SecurityManager.  See the <code>yosai init</code>
documentation, further below, for how to do that.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%">    <span style="color: #66d9ef">with</span> <span style="color: #f8f8f2">yosai:</span>
        <span style="color: #f8f8f2">subject</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">yosai</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">subject</span>
        <span style="color: #f8f8f2">session</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">subject</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get_session()</span>
        <span style="color: #f8f8f2">session</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">set_attribute(</span><span style="color: #e6db74">&#39;full_name&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;Jeffrey Lebowski&#39;</span><span style="color: #f8f8f2">)</span>
</pre></div></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>
        <script src="../js/extra.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
